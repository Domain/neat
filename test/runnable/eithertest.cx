module eithertest;

macro import cx.macros.either;

extern(C) void print(string);
extern(C) string cxruntime_itoa(int);

string itoa(int i) { return cxruntime_itoa(i); }

void main() {
    Either(int, float) either1 = 5;
    assert(either1.case(int i: "int " ~ itoa(i), float: "float") == "int 5");

    float f = 2;
    Either(int, float) either2 = f;
    assert(either2.case(int i: "int", float: "float") == "float");
    print("Success.");
}
