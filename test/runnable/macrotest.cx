module macrotest;

macro import cx.macros.assert;
macro import cx.macros.the;
macro import cx.macros.listcomprehension;

extern(C) void print(char[]);

int square(int) { return (the int) * the int; }

class A {
    this() { }
}

void listcotest() {
    int[] arr = [2, 3, 4];
    assert([a * 2 for a in arr] == [4, 6, 8]);
}

void main(string[] args) {
    print("macrotest");
    A a = new A;
    assert(a); // this would not have worked before, because objects are not bools
    listcotest();
    print("- success");
    assert(square(2) == 4);
}
